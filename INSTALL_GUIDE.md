# –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ Remnawave

## ‚ö†Ô∏è –í–ê–ñ–ù–û: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ñ–∞–π—Ä–≤–æ–ª–∞ –ø–µ—Ä–µ–¥ —É—Å—Ç–∞–Ω–æ–≤–∫–æ–π

### –î–ª—è ACME HTTP-01 (Let's Encrypt –±–µ–∑ Cloudflare)

–ï—Å–ª–∏ –≤—ã –≤—ã–±–∏—Ä–∞–µ—Ç–µ –º–µ—Ç–æ–¥ **ACME HTTP-01** –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è SSL-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤, **–î–û –ó–ê–ü–£–°–ö–ê –£–°–¢–ê–ù–û–í–ö–ò** –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ—Ç–∫—Ä—ã—Ç—å –ø–æ—Ä—Ç 80:

```bash
sudo ufw allow 80/tcp
sudo ufw allow 443/tcp  
sudo ufw allow 22/tcp
sudo ufw enable
```

**–ü–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ:**
- Certbot –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `--standalone` —Ä–µ–∂–∏–º
- –î–ª—è –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è HTTP-01 challenge Let's Encrypt –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å –Ω–∞ –ø–æ—Ä—Ç 80
- –ï—Å–ª–∏ –ø–æ—Ä—Ç –∑–∞–∫—Ä—ã—Ç, –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–∏—Ç—Å—è –æ—à–∏–±–∫–æ–π

**–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏** –º–æ–∂–Ω–æ –∑–∞–∫—Ä—ã—Ç—å –ø–æ—Ä—Ç 80:

```bash
sudo ufw delete allow 80/tcp
sudo ufw reload
```

### –î–ª—è Cloudflare DNS-01 (wildcard)

–ü–æ—Ä—Ç 80 **–ù–ï –¢–†–ï–ë–£–ï–¢–°–Ø**. –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å:

```bash
sudo ufw allow 443/tcp
sudo ufw allow 22/tcp
sudo ufw enable
```

---

## üîß –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è UFW

### –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è (—Ç–æ–ª—å–∫–æ –ø–∞–Ω–µ–ª—å)

```bash
sudo ufw allow 22/tcp    # SSH
sudo ufw allow 80/tcp    # –¢–æ–ª—å–∫–æ –¥–ª—è –ø–µ—Ä–≤–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å ACME
sudo ufw allow 443/tcp   # HTTPS
sudo ufw enable
```

### –ü–æ–ª–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ (–ø–∞–Ω–µ–ª—å + –Ω–æ–¥–∞)

```bash
sudo ufw allow 22/tcp    # SSH  
sudo ufw allow 80/tcp    # –¢–æ–ª—å–∫–æ –¥–ª—è –ø–µ—Ä–≤–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å ACME
sudo ufw allow 443/tcp   # HTTPS
sudo ufw allow from 172.30.0.0/16 to any port 2222 proto tcp  # Remnawave network –¥–ª—è –Ω–æ–¥—ã
sudo ufw enable
```

### –û—Ç–¥–µ–ª—å–Ω–∞—è –Ω–æ–¥–∞

```bash
sudo ufw allow 22/tcp    # SSH
sudo ufw allow 80/tcp    # –¢–æ–ª—å–∫–æ –¥–ª—è –ø–µ—Ä–≤–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å ACME  
sudo ufw allow 443/tcp   # HTTPS
sudo ufw allow from <IP_–ü–ê–ù–ï–õ–ò> to any port 2222 proto tcp  # –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ IP –≤–∞—à–µ–π –ø–∞–Ω–µ–ª–∏
sudo ufw enable
```

---

## üìã –ü–æ–ª–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å —É—Å—Ç–∞–Ω–æ–≤–∫–∏

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ñ–∞–π—Ä–≤–æ–ª–∞

```bash
# –í—ã–±–µ—Ä–∏—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –≤—ã—à–µ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
sudo ufw allow 22/tcp
sudo ufw allow 80/tcp     # –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ ACME HTTP-01
sudo ufw allow 443/tcp
sudo ufw enable
```

### 2. –ó–∞–ø—É—Å–∫ —É—Å—Ç–∞–Ω–æ–≤–æ—á–Ω–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞

```bash
bash <(curl -Ls https://raw.githubusercontent.com/DanteFuaran/Remna-install/refs/heads/main/install_remnawave.sh)
```

### 3. –í—ã–±–æ—Ä –º–µ—Ç–æ–¥–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

- **Cloudflare DNS-01**: –ù–µ —Ç—Ä–µ–±—É–µ—Ç –ø–æ—Ä—Ç–∞ 80, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç wildcard
- **ACME HTTP-01**: –¢—Ä–µ–±—É–µ—Ç –æ—Ç–∫—Ä—ã—Ç—ã–π –ø–æ—Ä—Ç 80 –≤–æ –≤—Ä–µ–º—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏

### 4. –ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ ACME HTTP-01, –º–æ–∂–Ω–æ –∑–∞–∫—Ä—ã—Ç—å –ø–æ—Ä—Ç 80:

```bash
sudo ufw delete allow 80/tcp
sudo ufw reload
```

---

## üêõ –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞

```
cannot load certificate "...fullchain.pem": PEM_read_bio_X509_AUX() failed
```

**–ü—Ä–∏—á–∏–Ω—ã:**
1. –ü–æ—Ä—Ç 80 –±—ã–ª –∑–∞–∫—Ä—ã—Ç –≤–æ –≤—Ä–µ–º—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞
2. DNS –Ω–µ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä
3. –§–∞–π—Ä–≤–æ–ª –±–ª–æ–∫–∏—Ä—É–µ—Ç –≤—Ö–æ–¥—è—â–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å UFW: `sudo ufw status`
2. –û—Ç–∫—Ä–æ–π—Ç–µ –ø–æ—Ä—Ç 80: `sudo ufw allow 80/tcp`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ DNS: `dig –≤–∞—à-–¥–æ–º–µ–Ω.com +short`
4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç

### Nginx –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤
cd /opt/remnawave
docker compose logs remnawave-nginx

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
ls -la /etc/letsencrypt/live/–≤–∞—à-–¥–æ–º–µ–Ω.com/
```

---

## üìû –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

- **–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π**: https://github.com/DanteFuaran/Remna-install
- **–û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π —Å–∫—Ä–∏–ø—Ç**: https://github.com/eGamesAPI/remnawave-reverse-proxy
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Remnawave**: https://remna.st/docs
